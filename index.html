<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>App Crist√£o</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0B1220">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="App Crist√£o">

  <style>
    :root{
      --bg: #0B1220;
      --card: rgba(12, 20, 38, .72);
      --card2: rgba(12, 20, 38, .55);
      --line: rgba(255,255,255,.10);
      --text: #EAF0FF;
      --muted: #A7B4D6;
      --btn: rgba(255,255,255,.08);
      --btn2: rgba(255,255,255,.14);
      --good: #45E2A8;
      --warn: #FFD166;
      --shadow: 0 14px 35px rgba(0,0,0,.35);
      --radius: 20px;
      --radius2: 16px;
      --safe-top: env(safe-area-inset-top);
      --safe-bot: env(safe-area-inset-bottom);
      --safe-left: env(safe-area-inset-left);
      --safe-right: env(safe-area-inset-right);
    }

    /* ===== FUNDO COM A SUA IMAGEM (APP TODO) ===== */
    html, body { height: 100%; }
    body{
      margin: 0;
      min-height: 100vh;
      color: var(--text);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Inter, Arial, sans-serif;

      background: url("./imagens/C5782EF9-9488-4CB9-8285-C27D142A8118.png")
        center center / cover no-repeat fixed;
      background-color: #000;
      overflow-x: hidden;
    }
    /* camada escura p/ texto ficar leg√≠vel */
    body::before{
      content:"";
      position: fixed;
      inset: 0;
      background: linear-gradient(180deg, rgba(2,6,16,.50), rgba(2,6,16,.88));
      pointer-events: none;
      z-index: 0;
    }

    /* app por cima do fundo */
    #app{
      position: relative;
      z-index: 1;
      min-height: 100vh;
      padding: calc(14px + var(--safe-top)) calc(14px + var(--safe-right)) calc(90px + var(--safe-bot)) calc(14px + var(--safe-left));
      box-sizing: border-box;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      margin-bottom: 14px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap: 10px;
    }
    .logo{
      width: 44px;
      height: 44px;
      border-radius: 14px;
      background: radial-gradient(circle at 30% 30%, #7C3AED, #06B6D4);
      display:grid;
      place-items:center;
      box-shadow: var(--shadow);
      flex: 0 0 auto;
    }
    .logo span{
      font-size: 22px;
      font-weight: 800;
      line-height: 1;
    }
    .title{
      display:flex;
      flex-direction:column;
      line-height:1.1;
    }
    .title b{ font-size: 18px; }
    .title small{ color: var(--muted); font-size: 12px; margin-top: 2px; }

    .pill{
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.10);
      display:flex;
      align-items:center;
      gap: 8px;
      color: var(--text);
      box-shadow: var(--shadow);
      user-select:none;
    }
    .dot{
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: var(--good);
      box-shadow: 0 0 0 4px rgba(69,226,168,.15);
    }

    .card{
      background: var(--card);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      margin-bottom: 14px;
    }

    .sectionTitle{
      color: rgba(234,240,255,.72);
      font-weight: 800;
      letter-spacing: .08em;
      font-size: 12px;
      margin-bottom: 10px;
    }

    .verse{
      font-size: 28px;
      line-height: 1.15;
      letter-spacing: -0.02em;
      margin: 0 0 10px 0;
    }
    .ref{
      color: var(--muted);
      font-size: 16px;
      margin-bottom: 14px;
    }

    .row{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .btn{
      border: 1px solid rgba(255,255,255,.10);
      background: var(--btn);
      color: var(--text);
      padding: 12px 14px;
      border-radius: 14px;
      font-weight: 700;
      cursor: pointer;
      user-select:none;
    }
    .btn:hover{ background: var(--btn2); }
    .btn.primary{
      background: rgba(69,226,168,.15);
      border-color: rgba(69,226,168,.30);
    }

    .subcard{
      margin-top: 12px;
      padding: 14px;
      border-radius: var(--radius2);
      background: var(--card2);
      border: 1px solid rgba(255,255,255,.10);
    }
    .subcard h3{
      margin: 0 0 6px 0;
      font-size: 20px;
    }
    .subcard p{
      margin: 0;
      color: var(--muted);
      line-height: 1.35;
    }

    /* GALERIA */
    .grid{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-top: 10px;
    }
    .imgTile{
      border-radius: 16px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.25);
      box-shadow: var(--shadow);
      cursor:pointer;
    }
    .imgTile img{
      width:100%;
      height: 150px;
      object-fit: cover;
      display:block;
      transform: scale(1.02);
    }
    .imgTile small{
      display:block;
      padding: 8px 10px;
      color: var(--muted);
      font-size: 12px;
      border-top: 1px solid rgba(255,255,255,.08);
    }

    /* modal imagem */
    .modal{
      position: fixed;
      inset: 0;
      z-index: 9999;
      background: rgba(0,0,0,.75);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
    }
    .modal.open{ display:flex; }
    .modalBox{
      width: min(980px, 100%);
      max-height: 92vh;
      border-radius: 18px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.35);
      box-shadow: 0 25px 80px rgba(0,0,0,.55);
    }
    .modalTop{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 10px;
      padding: 10px 12px;
      background: rgba(12, 20, 38, .65);
      border-bottom: 1px solid rgba(255,255,255,.10);
    }
    .modalTop b{ font-size: 14px; color: var(--text); }
    .modalTop button{
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.08);
      color: var(--text);
      cursor:pointer;
      font-weight: 800;
    }
    .modalImg{
      width:100%;
      max-height: calc(92vh - 48px);
      object-fit: contain;
      display:block;
      background: rgba(0,0,0,.35);
    }

    /* inputs */
    .field{
      display:flex;
      flex-direction:column;
      gap: 6px;
      margin-top: 10px;
    }
    label{
      color: rgba(234,240,255,.8);
      font-size: 12px;
      font-weight: 800;
      letter-spacing: .06em;
      text-transform: uppercase;
    }
    input, textarea{
      width: 100%;
      box-sizing: border-box;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      color: var(--text);
      padding: 12px 12px;
      outline: none;
      font-size: 15px;
    }
    textarea{ min-height: 110px; resize: vertical; }
    .hint{ color: var(--muted); font-size: 12px; margin-top: 8px; }

    /* lista */
    .list{
      margin-top: 10px;
      display:flex;
      flex-direction:column;
      gap: 10px;
    }
    .item{
      padding: 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
    }
    .itemTop{
      display:flex;
      justify-content:space-between;
      gap: 10px;
      align-items:flex-start;
    }
    .item b{ display:block; margin-bottom: 4px; }
    .item small{ color: var(--muted); }
    .item .x{
      flex: 0 0 auto;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      border-radius: 12px;
      padding: 8px 10px;
      cursor:pointer;
      font-weight: 900;
    }

    /* bottom nav */
    .bottomNav{
      position: fixed;
      left: 0; right: 0;
      bottom: 0;
      padding: 10px calc(12px + var(--safe-right)) calc(10px + var(--safe-bot)) calc(12px + var(--safe-left));
      z-index: 50;
      background: linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,.55));
      pointer-events: none;
    }
    .tabs{
      pointer-events: auto;
      display:flex;
      gap: 10px;
      justify-content:space-between;
      background: rgba(12, 20, 38, .70);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 22px;
      padding: 10px;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      box-shadow: var(--shadow);
    }
    .tab{
      flex: 1 1 0;
      border-radius: 16px;
      padding: 10px 8px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap: 6px;
      color: rgba(234,240,255,.70);
      font-weight: 800;
      font-size: 12px;
      cursor:pointer;
      user-select:none;
    }
    .tab span{ font-size: 18px; }
    .tab.active{
      background: rgba(255,255,255,.08);
      color: var(--text);
      border: 1px solid rgba(255,255,255,.12);
    }

    /* telas */
    .screen{ display:none; }
    .screen.active{ display:block; }

    @media (min-width: 760px){
      .grid{ grid-template-columns: repeat(3, 1fr); }
      .imgTile img{ height: 180px; }
      .verse{ font-size: 32px; }
    }
  </style>
</head>

<body>
  <div id="app">
    <div class="topbar">
      <div class="brand">
        <div class="logo"><span>‚úù</span></div>
        <div class="title">
          <b>App Crist√£o</b>
          <small>Seu devocional pessoal ‚Ä¢ offline</small>
        </div>
      </div>

      <div class="pill" id="statusPill">
        <span class="dot" id="statusDot"></span>
        <span id="statusText">Dia em dia</span>
      </div>
    </div>

    <!-- ===== HOJE ===== -->
    <section class="screen active" id="screen-hoje">
      <div class="card">
        <div class="sectionTitle">HOJE</div>

        <p class="verse" id="verseText">‚ÄúDeixo-vos a paz, a minha paz vos dou; n√£o vo-la dou como o mundo a d√°.‚Äù</p>
        <div class="ref" id="verseRef">Jo√£o 14:27</div>

        <div class="row">
          <button class="btn primary" id="btnTrocar">Trocar</button>
          <button class="btn" id="btnCompartilhar">Compartilhar</button>
          <button class="btn" id="btnCopiar">Copiar</button>
        </div>

        <div class="subcard">
          <h3 id="devoTitle">Devocional: Coragem</h3>
          <p id="devoText">Coragem n√£o √© aus√™ncia de medo; √© fidelidade apesar do medo. D√™ o pr√≥ximo passo com Deus.</p>
        </div>

        <div class="hint">üìå Dica: adicione √† tela inicial no Safari para ficar como app.</div>
      </div>

      <div class="card">
        <div class="sectionTitle">GALERIA</div>
        <div class="hint">As imagens abaixo s√£o lidas da sua lista. (Voc√™ pode adicionar mais no c√≥digo.)</div>
        <div class="grid" id="galleryGrid"></div>
      </div>

      <div class="card">
        <div class="sectionTitle">M√öSICA</div>
        <div class="hint">Cole um link de MP3 (ou hospede um mp3 no GitHub e use o link direto).</div>

        <div class="field">
          <label>Link do √°udio (mp3)</label>
          <input id="audioUrl" placeholder="https://.../musica.mp3" />
        </div>

        <div class="row" style="margin-top:10px;">
          <button class="btn primary" id="btnSalvarAudio">Salvar</button>
          <button class="btn" id="btnLimparAudio">Limpar</button>
        </div>

        <div class="subcard" style="margin-top:12px;">
          <audio id="audioPlayer" controls style="width:100%;"></audio>
          <div class="hint" style="margin-top:10px;">Se o √°udio n√£o tocar, o link pode n√£o ser ‚Äúdireto‚Äù para mp3.</div>
        </div>
      </div>
    </section>

    <!-- ===== ORA√á√ÉO ===== -->
    <section class="screen" id="screen-oracao">
      <div class="card">
        <div class="sectionTitle">PEDIDOS DE ORA√á√ÉO</div>

        <div class="field">
          <label>Nome / Motivo</label>
          <input id="prayTitle" placeholder="Ex: Fam√≠lia, Sa√∫de, Trabalho..." />
        </div>

        <div class="field">
          <label>Detalhes</label>
          <textarea id="prayText" placeholder="Escreva aqui seu pedido..."></textarea>
        </div>

        <div class="row" style="margin-top:10px;">
          <button class="btn primary" id="btnAddPrayer">Adicionar</button>
          <button class="btn" id="btnClearPrayers">Apagar todos</button>
        </div>

        <div class="list" id="prayerList"></div>
      </div>
    </section>

    <!-- ===== NOTAS ===== -->
    <section class="screen" id="screen-notas">
      <div class="card">
        <div class="sectionTitle">NOTAS</div>
        <div class="hint">Suas anota√ß√µes ficam salvas no aparelho.</div>

        <div class="field">
          <label>Minha nota</label>
          <textarea id="notesBox" placeholder="Escreva suas anota√ß√µes..."></textarea>
        </div>

        <div class="row" style="margin-top:10px;">
          <button class="btn primary" id="btnSaveNotes">Salvar</button>
          <button class="btn" id="btnClearNotes">Limpar</button>
        </div>
      </div>
    </section>

    <!-- ===== CONFIG ===== -->
    <section class="screen" id="screen-config">
      <div class="card">
        <div class="sectionTitle">CONFIG</div>

        <div class="field">
          <label>Status</label>
          <input id="statusInput" placeholder="Ex: Dia em dia / Pend√™ncia hoje / Offline..." />
        </div>

        <div class="row" style="margin-top:10px;">
          <button class="btn primary" id="btnSaveStatus">Salvar</button>
          <button class="btn" id="btnGoHome">Ir para Hoje</button>
        </div>

        <div class="subcard" style="margin-top:12px;">
          <h3>Plano simples</h3>
          <p>Voc√™ pode evoluir esse app depois (mais imagens, m√∫sicas locais, etc.).</p>
        </div>

        <div class="hint" style="margin-top:12px;">
          Se voc√™ estiver usando <b>sw.js</b> (offline), √†s vezes precisa atualizar cache para ver mudan√ßas.
        </div>
      </div>
    </section>
  </div>

  <!-- Bottom nav -->
  <div class="bottomNav">
    <div class="tabs">
      <div class="tab active" data-go="hoje"><span>üè†</span>Hoje</div>
      <div class="tab" data-go="oracao"><span>üôè</span>Ora√ß√£o</div>
      <div class="tab" data-go="notas"><span>üìù</span>Notas</div>
      <div class="tab" data-go="config"><span>‚öôÔ∏è</span>Config</div>
    </div>
  </div>

  <!-- Modal imagem -->
  <div class="modal" id="imgModal">
    <div class="modalBox">
      <div class="modalTop">
        <b id="modalTitle">Imagem</b>
        <button id="modalClose">Fechar</button>
      </div>
      <img class="modalImg" id="modalImg" alt="Imagem" />
    </div>
  </div>

  <script>
    // ========= OFFLINE (se voc√™ j√° tem sw.js no repo) =========
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./sw.js").catch(()=>{});
    }

    // ========= UTIL =========
    const $ = (q) => document.querySelector(q);
    const $$ = (q) => [...document.querySelectorAll(q)];
    const store = {
      get(key, fallback){
        try{ return JSON.parse(localStorage.getItem(key)) ?? fallback; }catch{ return fallback; }
      },
      set(key, value){
        localStorage.setItem(key, JSON.stringify(value));
      }
    };

    // ========= STATUS =========
    function setOnlineUI(){
      const online = navigator.onLine;
      $("#statusDot").style.background = online ? "var(--good)" : "var(--warn)";
      $("#statusDot").style.boxShadow = online ? "0 0 0 4px rgba(69,226,168,.15)" : "0 0 0 4px rgba(255,209,102,.15)";
      const saved = store.get("statusText", "Dia em dia");
      $("#statusText").textContent = online ? saved : "Offline";
    }
    window.addEventListener("online", setOnlineUI);
    window.addEventListener("offline", setOnlineUI);

    // ========= DEVOCIONAL / VERSOS =========
    const verses = [
      { text: "‚ÄúDeixo-vos a paz, a minha paz vos dou; n√£o vo-la dou como o mundo a d√°.‚Äù", ref: "Jo√£o 14:27", devoTitle:"Devocional: Coragem", devoText:"Coragem n√£o √© aus√™ncia de medo; √© fidelidade apesar do medo. D√™ o pr√≥ximo passo com Deus." },
      { text: "‚ÄúO Senhor √© o meu pastor; nada me faltar√°.‚Äù", ref: "Salmos 23:1", devoTitle:"Devocional: Confian√ßa", devoText:"Quando Deus guia, a alma descansa. Confie na dire√ß√£o dEle hoje." },
      { text: "‚ÄúTudo posso naquele que me fortalece.‚Äù", ref: "Filipenses 4:13", devoTitle:"Devocional: For√ßa", devoText:"N√£o √© sobre a sua capacidade, √© sobre a for√ßa que vem do Alto." },
      { text: "‚ÄúL√¢mpada para os meus p√©s √© a tua palavra.‚Äù", ref: "Salmos 119:105", devoTitle:"Devocional: Dire√ß√£o", devoText:"Um passo de cada vez, iluminado pela Palavra." },
    ];

    function renderVerse(i){
      const v = verses[i];
      $("#verseText").textContent = v.text;
      $("#verseRef").textContent = v.ref;
      $("#devoTitle").textContent = v.devoTitle;
      $("#devoText").textContent = v.devoText;
      store.set("verseIndex", i);
    }

    // ========= GALERIA (ADICIONE SUAS IMAGENS AQUI) =========
    // Coloque TODAS as suas imagens dentro da pasta /imagens e liste aqui:
    const galleryImages = [
      { src: "./imagens/C5782EF9-9488-4CB9-8285-C27D142A8118.png", title: "Imagem 1" },

      // üëâ ADICIONE AS OUTRAS ASSIM (exemplo):
      // { src: "./imagens/OUTRO_ARQUIVO.png", title: "Imagem 2" },
      // { src: "./imagens/OUTRO_ARQUIVO2.png", title: "Imagem 3" },
    ];

    function renderGallery(){
      const grid = $("#galleryGrid");
      grid.innerHTML = "";
      galleryImages.forEach((img, idx) => {
        const tile = document.createElement("div");
        tile.className = "imgTile";
        tile.innerHTML = `
          <img src="${img.src}" alt="${img.title}">
          <small>${img.title}</small>
        `;
        tile.addEventListener("click", ()=> openModal(img.title, img.src));
        grid.appendChild(tile);
      });
    }

    // ========= MODAL =========
    function openModal(title, src){
      $("#modalTitle").textContent = title;
      $("#modalImg").src = src;
      $("#imgModal").classList.add("open");
    }
    function closeModal(){
      $("#imgModal").classList.remove("open");
      $("#modalImg").src = "";
    }
    $("#modalClose").addEventListener("click", closeModal);
    $("#imgModal").addEventListener("click", (e)=>{ if(e.target.id==="imgModal") closeModal(); });

    // ========= A√á√ïES HOJE =========
    $("#btnTrocar").addEventListener("click", ()=>{
      const i = (store.get("verseIndex", 0) + 1) % verses.length;
      renderVerse(i);
    });

    $("#btnCopiar").addEventListener("click", async ()=>{
      const text = `${$("#verseText").textContent}\n${$("#verseRef").textContent}\n\n${$("#devoTitle").textContent}\n${$("#devoText").textContent}`;
      try{
        await navigator.clipboard.writeText(text);
        alert("Copiado!");
      }catch{
        alert("N√£o consegui copiar. Tente selecionar e copiar manualmente.");
      }
    });

    $("#btnCompartilhar").addEventListener("click", async ()=>{
      const text = `${$("#verseText").textContent}\n${$("#verseRef").textContent}\n\n${$("#devoTitle").textContent}\n${$("#devoText").textContent}`;
      if(navigator.share){
        try{ await navigator.share({ title:"App Crist√£o", text }); }
        catch{}
      } else {
        alert("Compartilhar n√£o dispon√≠vel aqui. Use Copiar.");
      }
    });

    // ========= M√öSICA =========
    function loadAudio(){
      const url = store.get("audioUrl", "");
      $("#audioUrl").value = url;
      $("#audioPlayer").src = url || "";
    }
    $("#btnSalvarAudio").addEventListener("click", ()=>{
      const url = $("#audioUrl").value.trim();
      store.set("audioUrl", url);
      loadAudio();
      alert("Salvo!");
    });
    $("#btnLimparAudio").addEventListener("click", ()=>{
      store.set("audioUrl", "");
      loadAudio();
      alert("Limpo!");
    });

    // ========= PEDIDOS DE ORA√á√ÉO =========
    function renderPrayers(){
      const list = $("#prayerList");
      const prayers = store.get("prayers", []);
      list.innerHTML = "";
      if(prayers.length === 0){
        const empty = document.createElement("div");
        empty.className = "hint";
        empty.textContent = "Nenhum pedido ainda. Adicione acima.";
        list.appendChild(empty);
        return;
      }

      prayers.forEach((p, idx)=>{
        const el = document.createElement("div");
        el.className = "item";
        el.innerHTML = `
          <div class="itemTop">
            <div>
              <b>${escapeHtml(p.title || "Pedido")}</b>
              <small>${new Date(p.ts).toLocaleString()}</small>
            </div>
            <button class="x" title="Remover">‚úï</button>
          </div>
          <div style="margin-top:8px; color: var(--muted); line-height:1.35;">
            ${escapeHtml(p.text || "").replace(/\n/g,"<br>")}
          </div>
        `;
        el.querySelector(".x").addEventListener("click", ()=>{
          const arr = store.get("prayers", []);
          arr.splice(idx, 1);
          store.set("prayers", arr);
          renderPrayers();
        });
        list.appendChild(el);
      });
    }

    $("#btnAddPrayer").addEventListener("click", ()=>{
      const title = $("#prayTitle").value.trim();
      const text = $("#prayText").value.trim();
      if(!title && !text){
        alert("Escreva um pedido.");
        return;
      }
      const prayers = store.get("prayers", []);
      prayers.unshift({ title, text, ts: Date.now() });
      store.set("prayers", prayers);
      $("#prayTitle").value = "";
      $("#prayText").value = "";
      renderPrayers();
    });

    $("#btnClearPrayers").addEventListener("click", ()=>{
      if(confirm("Apagar todos os pedidos?")){
        store.set("prayers", []);
        renderPrayers();
      }
    });

    // ========= NOTAS =========
    function loadNotes(){
      $("#notesBox").value = store.get("notes", "");
    }
    $("#btnSaveNotes").addEventListener("click", ()=>{
      store.set("notes", $("#notesBox").value);
      alert("Notas salvas!");
    });
    $("#btnClearNotes").addEventListener("click", ()=>{
      if(confirm("Limpar notas?")){
        store.set("notes", "");
        loadNotes();
      }
    });

    // ========= CONFIG =========
    function loadStatus(){
      $("#statusInput").value = store.get("statusText", "Dia em dia");
      setOnlineUI();
    }
    $("#btnSaveStatus").addEventListener("click", ()=>{
      store.set("statusText", $("#statusInput").value.trim() || "Dia em dia");
      setOnlineUI();
      alert("Salvo!");
    });
    $("#btnGoHome").addEventListener("click", ()=> go("hoje"));

    // ========= NAV =========
    function go(name){
      $$(".screen").forEach(s => s.classList.remove("active"));
      $(`#screen-${name}`).classList.add("active");

      $$(".tab").forEach(t => t.classList.remove("active"));
      $(`.tab[data-go="${name}"]`).classList.add("active");

      store.set("screen", name);
      window.scrollTo({ top: 0, behavior: "smooth" });
    }
    $$(".tab").forEach(t => t.addEventListener("click", ()=> go(t.dataset.go)));

    // ========= seguran√ßa p/ HTML =========
    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    // ========= INIT =========
    (function init(){
      const savedIndex = store.get("verseIndex", 0);
      renderVerse(savedIndex);

      renderGallery();
      loadAudio();
      renderPrayers();
      loadNotes();
      loadStatus();

      const last = store.get("screen", "hoje");
      go(last);
    })();
  </script>
</body>
</html>
